<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDental ‚Äì Ph·∫ßn m·ªÅm qu·∫£n l√Ω nha khoa</title>
    <meta name="description" content="TDental - Ph·∫ßn m·ªÅm qu·∫£n l√Ω nha khoa chuy√™n nghi·ªáp">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>

    <!-- ‚ïê‚ïê‚ïê LOGIN SCREEN ‚ïê‚ïê‚ïê -->
    <div id="loginScreen" class="login-screen">
        <div class="login-card">
            <div class="login-logo">
                <svg viewBox="0 0 32 32" fill="none">
                    <rect width="32" height="32" rx="6" fill="#1A6DE3" />
                    <text x="5" y="23" font-size="18" font-weight="bold" fill="white">T</text>
                </svg>
                <span>TDental</span>
            </div>
            <div class="login-subtitle">Ph·∫ßn m·ªÅm qu·∫£n l√Ω nha khoa chuy√™n nghi·ªáp</div>
            <div id="loginError" class="login-error"></div>
            <div class="login-field">
                <label>Email</label>
                <input id="loginEmail" type="text" placeholder="Email ho·∫∑c T√™n ƒëƒÉng nh·∫≠p (v√≠ d·ª•: admin)"
                    autocomplete="username">
            </div>
            <div class="login-field">
                <label>M·∫≠t kh·∫©u</label>
                <div class="password-wrapper">
                    <input id="loginPassword" type="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u..."
                        autocomplete="current-password">
                    <button type="button" class="password-toggle" onclick="toggleLoginPassword()">üëÅÔ∏è</button>
                </div>
            </div>
            <label class="login-remember">
                <input type="checkbox" id="loginRemember" checked>
                <span>Ghi nh·ªõ ƒëƒÉng nh·∫≠p (60 ng√†y)</span>
            </label>
            <button class="login-btn" onclick="handleLogin()">ƒêƒÉng nh·∫≠p</button>
            <div class="login-footer">¬© 2026 TDental ‚Äî Ph·∫ßn m·ªÅm qu·∫£n l√Ω nha khoa</div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê -->
    <nav class="sidebar" id="sidebar" style="display:none">
        <div class="sidebar-logo" style="justify-content:flex-start;padding:0 16px;gap:10px">
            <svg viewBox="0 0 32 32" fill="none" style="width:28px;height:28px;flex-shrink:0">
                <rect width="32" height="32" rx="6" fill="#1A6DE3" />
                <text x="5" y="23" font-size="18" font-weight="bold" fill="white">T</text>
            </svg>
            <span style="color:#fff;font-size:16px;font-weight:700;white-space:nowrap">TDental</span>
        </div>
        <div class="sidebar-nav">
            <a class="sidebar-item active" data-page="dashboard" onclick="navigate('dashboard')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7" rx="1" />
                    <rect x="14" y="3" width="7" height="7" rx="1" />
                    <rect x="3" y="14" width="7" height="7" rx="1" />
                    <rect x="14" y="14" width="7" height="7" rx="1" />
                </svg>
                <span>T·ªïng quan</span>
            </a>
            <a class="sidebar-item" data-page="customers" onclick="navigate('customers')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" />
                    <circle cx="9" cy="7" r="4" />
                    <path d="M23 21v-2a4 4 0 00-3-3.87" />
                    <path d="M16 3.13a4 4 0 010 7.75" />
                </svg>
                <span>Kh√°ch h√†ng</span>
            </a>
            <a class="sidebar-item" data-page="reception" onclick="navigate('reception')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2" />
                    <rect x="8" y="2" width="8" height="4" rx="1" />
                    <path d="M9 14l2 2 4-4" />
                </svg>
                <span>C√¥ng vi·ªác</span>
            </a>
            <a class="sidebar-item" data-page="calendar" onclick="navigate('calendar')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" />
                    <path d="M16 2v4M8 2v4M3 10h18" />
                </svg>
                <span>L·ªãch h·∫πn</span>
            </a>
            <div class="sidebar-group">
                <a class="sidebar-item" onclick="toggleSubmenu(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z" />
                    </svg>
                    <span>Labo</span>
                    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6" />
                    </svg>
                </a>
                <div class="sidebar-submenu">
                    <a class="sidebar-subitem" data-page="treatments" onclick="navigate('treatments')">Qu·∫£n l√Ω phi·∫øu
                        Labo</a>
                    <a class="sidebar-subitem" data-page="labo-orders" onclick="navigate('treatments')">ƒê∆°n h√†ng
                        Labo</a>
                </div>
            </div>
            <div class="sidebar-group">
                <a class="sidebar-item" onclick="toggleSubmenu(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1" />
                        <circle cx="20" cy="21" r="1" />
                        <path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6" />
                    </svg>
                    <span>Mua h√†ng</span>
                    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6" />
                    </svg>
                </a>
                <div class="sidebar-submenu">
                    <a class="sidebar-subitem" data-page="purchase" onclick="navigate('purchase')">Mua h√†ng</a>
                    <a class="sidebar-subitem" data-page="purchase-return" onclick="navigate('purchase')">Tr·∫£ h√†ng</a>
                </div>
            </div>
            <a class="sidebar-item" data-page="inventory" onclick="navigate('inventory')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z" />
                    <path d="M3.27 6.96L12 12.01l8.73-5.05M12 22.08V12" />
                </svg>
                <span>Kho</span>
            </a>
            <a class="sidebar-item" data-page="salary" onclick="navigate('salary')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="1" x2="12" y2="23" />
                    <path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6" />
                </svg>
                <span>L∆∞∆°ng</span>
                <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18l6-6-6-6" />
                </svg>
            </a>
            <a class="sidebar-item" data-page="cashbook" onclick="navigate('cashbook')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="3" width="20" height="14" rx="2" />
                    <path d="M2 10h20" />
                    <path d="M12 14h.01" />
                </svg>
                <span>S·ªï qu·ªπ</span>
                <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18l6-6-6-6" />
                </svg>
            </a>
            <div class="sidebar-group">
                <a class="sidebar-item" onclick="toggleSubmenu(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z" />
                    </svg>
                    <span>T·ªïng ƒë√†i</span>
                    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6" />
                    </svg>
                </a>
                <div class="sidebar-submenu">
                    <a class="sidebar-subitem" data-page="callcenter" onclick="navigate('callcenter')">C·∫•u h√¨nh t·ªïng
                        ƒë√†i</a>
                    <a class="sidebar-subitem" data-page="call-history" onclick="navigate('callcenter')">L·ªãch s·ª≠ cu·ªôc
                        g·ªçi</a>
                </div>
            </div>
            <div class="sidebar-group">
                <a class="sidebar-item" onclick="toggleSubmenu(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                    </svg>
                    <span>Hoa h·ªìng</span>
                    <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6" />
                    </svg>
                </a>
                <div class="sidebar-submenu">
                    <a class="sidebar-subitem" data-page="commission" onclick="navigate('commission')">Ng∆∞·ªùi gi·ªõi
                        thi·ªáu</a>
                    <a class="sidebar-subitem" data-page="commission-staff" onclick="navigate('commission')">Nh√¢n
                        vi√™n</a>
                </div>
            </div>
            <a class="sidebar-item" data-page="reports" onclick="navigate('reports')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 20V10M12 20V4M6 20v-6" />
                </svg>
                <span>B√°o c√°o</span>
                <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18l6-6-6-6" />
                </svg>
            </a>
            <a class="sidebar-item" data-page="categories" onclick="navigate('categories')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 3h7v7H3zM14 3h7v7h-7zM14 14h7v7h-7zM3 14h7v7H3z" />
                </svg>
                <span>Danh m·ª•c</span>
                <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18l6-6-6-6" />
                </svg>
            </a>
        </div>
        <div class="sidebar-bottom">
            <a class="sidebar-item" data-page="users" onclick="navigate('users')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                </svg>
                <span>Qu·∫£n l√Ω ng∆∞·ªùi d√πng</span>
            </a>
            <a class="sidebar-item" data-page="settings" onclick="navigate('settings')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3" />
                    <path
                        d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" />
                </svg>
                <span>C·∫•u h√¨nh</span>
                <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18l6-6-6-6" />
                </svg>
            </a>
            <a class="sidebar-item" onclick="logoutUser()" style="color:#ef4444;cursor:pointer">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4" />
                    <polyline points="16 17 21 12 16 7" />
                    <line x1="21" y1="12" x2="9" y2="12" />
                </svg>
                <span>ƒêƒÉng xu·∫•t</span>
            </a>
        </div>
    </nav>

    <!-- ‚ïê‚ïê‚ïê TOPBAR ‚ïê‚ïê‚ïê -->
    <header class="topbar" style="display:none">
        <button class="topbar-hamburger" onclick="toggleSidebar()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                <path d="M3 12h18M3 6h18M3 18h18" />
            </svg>
        </button>
        <div class="topbar-search">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8" />
                <path d="M21 21l-4.35-4.35" />
            </svg>
            <input type="text" placeholder="T√¨m ki·∫øm (F2)" id="globalSearch">
        </div>
        <div class="topbar-spacer"></div>
        <div class="topbar-marquee">
            <span class="marquee-text">M√†n h√¨nh l·ªÖ t√¢n</span>
            <span class="badge-new">M·ªõi</span>
            <span id="uptime">--</span>
        </div>
        <div style="position:relative">
            <button class="topbar-branch" id="branchSelector" onclick="toggleBranchDropdown(event)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z" />
                    <circle cx="12" cy="10" r="3" />
                </svg>
                <span id="currentBranch">T·∫•t c·∫£ chi nh√°nh</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                    <path d="M6 9l6 6 6-6" />
                </svg>
            </button>
            <div class="branch-dropdown" id="branchDropdown">
                <!-- Branches dynamically loaded here -->
            </div>
        </div>
        <div class="topbar-bell" onclick="alert('Ch∆∞a c√≥ th√¥ng b√°o m·ªõi')" style="cursor:pointer">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9" />
                <path d="M13.73 21a2 2 0 01-3.46 0" />
            </svg>
            <div class="notif-dot"></div>
        </div>
        <div class="topbar-user">
            <div class="topbar-user-avatar">A</div>
            <span>admin</span>
        </div>
    </header>

    <!-- ‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê -->
    <div class="main" id="mainContent" style="display:none">
        <!-- Dashboard page (default) -->
        <div id="page-dashboard" class="page-content">
            <div class="page-header">
                <h2>T·ªïng quan</h2>
                <div class="page-header-actions">
                    <span style="font-size:12px;color:var(--text-muted)" id="dashDate"></span>
                </div>
            </div>
            <!-- Stat cards removed to match original TDental dashboard -->
            <div id="dashGrid" style="display:none">
                <span id="statCustomers"></span>
                <span id="statAppointments"></span>
                <span id="statTreating"></span>
                <span id="statEmployees"></span>
            </div>
            <div class="dash-2col">
                <!-- LEFT COLUMN -->
                <div>
                    <!-- TI·∫æP NH·∫¨N KH√ÅCH H√ÄNG -->
                    <div class="dash-panel">
                        <div class="dash-panel-header">
                            <span>TI·∫æP NH·∫¨N KH√ÅCH H√ÄNG</span>
                            <div class="panel-actions">
                                <button class="panel-add-btn" title="Th√™m m·ªõi"
                                    onclick="openModal('reception')">+</button>
                                <div style="position:relative">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        style="position:absolute;left:8px;top:50%;transform:translateY(-50%);width:13px;height:13px;color:var(--text-muted)">
                                        <circle cx="11" cy="11" r="8" />
                                        <path d="M21 21l-4.35-4.35" />
                                    </svg>
                                    <input type="text" class="panel-search" placeholder="T√¨m ki·∫øm theo h·ªç t√™n, sdt"
                                        style="padding-left:28px">
                                </div>
                                <button class="panel-filter-btn" title="L·ªçc">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        width="14" height="14">
                                        <polygon points="22,3 2,3 10,12.46 10,19 14,21 14,12.46" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="panel-tabs">
                            <button class="panel-tab active">T·∫•t c·∫£ <span class="count" id="recTabAll">0</span></button>
                            <button class="panel-tab">Ch·ªù kh√°m <span class="count" id="recTabWaiting">0</span></button>
                            <button class="panel-tab">ƒêang kh√°m <span class="count" id="recTabExam">0</span></button>
                            <button class="panel-tab">Ho√†n th√†nh <span class="count" id="recTabDone">0</span></button>
                        </div>
                        <div class="dash-panel-body" id="receptionList" style="min-height:200px">
                            <div class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </div>
                        </div>
                    </div>
                    <!-- D·ªäCH V·ª§ TRONG NG√ÄY -->
                    <div class="dash-panel">
                        <div class="dash-panel-header">
                            <span>D·ªäCH V·ª§ TRONG NG√ÄY</span>
                            <div class="panel-actions">
                                <div style="position:relative">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        style="position:absolute;left:8px;top:50%;transform:translateY(-50%);width:13px;height:13px;color:var(--text-muted)">
                                        <circle cx="11" cy="11" r="8" />
                                        <path d="M21 21l-4.35-4.35" />
                                    </svg>
                                    <input type="text" class="panel-search" placeholder="T√¨m ki·∫øm nhanh"
                                        style="padding-left:28px">
                                </div>
                            </div>
                        </div>
                        <div class="dash-panel-body" id="todayServiceList">
                            <div class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </div>
                        </div>
                    </div>
                </div>
                <!-- RIGHT COLUMN -->
                <div>
                    <!-- L·ªäCH H·∫∏N H√îM NAY -->
                    <div class="dash-panel">
                        <div class="dash-panel-header">
                            <span>L·ªäCH H·∫∏N H√îM NAY</span>
                            <div class="panel-actions">
                                <button class="panel-add-btn" title="Th√™m l·ªãch h·∫πn"
                                    onclick="openModal('appointment')">+</button>
                            </div>
                        </div>
                        <div style="padding:8px 16px 0">
                            <div style="position:relative;margin-bottom:8px">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    style="position:absolute;left:8px;top:50%;transform:translateY(-50%);width:13px;height:13px;color:var(--text-muted)">
                                    <circle cx="11" cy="11" r="8" />
                                    <path d="M21 21l-4.35-4.35" />
                                </svg>
                                <input type="text" class="panel-search" placeholder="T√¨m ki·∫øm b√°c sƒ©, h·ªç t√™n, sdt"
                                    style="padding-left:28px;width:100%;box-sizing:border-box" id="apptListSearch">
                                <!-- Rainbow color icon matching original -->
                                <div style="position:absolute;right:8px;top:50%;transform:translateY(-50%);width:20px;height:20px;border-radius:50%;background:conic-gradient(#ef4444,#f97316,#eab308,#22c55e,#3b82f6,#8b5cf6,#ef4444);cursor:pointer"
                                    title="L·ªçc theo m√†u"></div>
                            </div>
                        </div>
                        <div class="panel-tabs" id="apptFilterTabs">
                            <button class="panel-tab active" data-appt-filter="all"
                                onclick="setDashboardApptFilter('all')">T·∫•t c·∫£ <span class="count"
                                    id="apptTabAll">0</span></button>
                            <button class="panel-tab" data-appt-filter="pending"
                                onclick="setDashboardApptFilter('pending')">ƒêang h·∫πn <span class="count"
                                    id="apptTabPending">0</span></button>
                            <button class="panel-tab" data-appt-filter="arrived"
                                onclick="setDashboardApptFilter('arrived')">ƒê√£ ƒë·∫øn <span class="count"
                                    id="apptTabArrived">0</span></button>
                            <button class="panel-tab" data-appt-filter="cancel"
                                onclick="setDashboardApptFilter('cancel')">H·ªßy h·∫πn <span class="count"
                                    id="apptTabCancel">0</span></button>
                        </div>
                        <div class="dash-panel-body" id="todayApptList" style="min-height:200px;max-height:500px">
                            <div class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </div>
                        </div>
                    </div>
                    <!-- DOANH THU panel -->
                    <div class="dash-panel" id="revenuePanel">
                        <div class="dash-panel-header">
                            <span>DOANH THU</span>
                        </div>
                        <div class="dash-panel-body"
                            style="padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px">
                            <div style="position:relative;width:220px;height:220px;margin-bottom:20px">
                                <svg viewBox="0 0 36 36" class="circular-chart" id="revenueChart">
                                    <path class="circle-bg"
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="#eee" stroke-width="3.8" />
                                    <path class="circle" stroke-dasharray="100, 100"
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none" stroke="#8b5cf6" stroke-width="3.8" stroke-linecap="round" />
                                </svg>
                                <div
                                    style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center">
                                    <div style="font-size:20px;font-weight:700;color:#3b82f6" id="revTotal">---</div>
                                    <div style="font-size:12px;color:#9ca3af">T·ªïng doanh thu</div>
                                </div>
                            </div>
                            <div class="revenue-legend" id="revenueLegend"
                                style="width:100%;display:flex;justify-content:center;gap:15px;flex-wrap:wrap">
                                <!-- Legend items -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Customers page -->
        <div id="page-customers" class="page-content">
            <div class="page-header">
                <h2>Kh√°ch h√†ng</h2>
                <div class="page-header-actions">
                    <button class="btn-primary" onclick="openModal('customer')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 8v8M8 12h8" />
                        </svg>
                        Th√™m m·ªõi
                    </button>
                </div>
            </div>
            <div class="tabs">
                <button class="tab active" data-status="" onclick="filterStatus(this)">T·∫•t c·∫£</button>
                <button class="tab" data-status="sale" onclick="filterStatus(this)">ƒêang ƒëi·ªÅu tr·ªã</button>
                <button class="tab" data-status="done" onclick="filterStatus(this)">Ho√†n th√†nh</button>
                <button class="tab" data-status="none" onclick="filterStatus(this)">Ch∆∞a ph√°t sinh</button>
                <div class="tabs-right">
                    <select class="filter-select" id="companyFilter" onchange="currentPage=1;loadCustomers()">
                        <option value="">L·ªçc chi nh√°nh t·∫°o</option>
                    </select>
                    <div class="filter-search">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <path d="M21 21l-4.35-4.35" />
                        </svg>
                        <input type="text" id="tableSearch" placeholder="T√¨m ki·∫øm" oninput="debounceSearch()">
                    </div>
                </div>
            </div>
            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th class="cell-check"><input type="checkbox"></th>
                            <th style="min-width:180px">H·ªç v√† t√™n</th>
                            <th>Ng√†y sinh</th>
                            <th>Ng√†y h·∫πn g·∫ßn nh·∫•t</th>
                            <th>Ng√†y h·∫πn s·∫Øp t·ªõi</th>
                            <th>Ng√†y ƒëi·ªÅu tr·ªã g·∫ßn nh·∫•t</th>
                            <th>T√¨nh tr·∫°ng ƒëi·ªÅu tr·ªã</th>
                            <th>C√¥ng n·ª£</th>
                            <th>T·ªïng ti·ªÅn ƒêT</th>
                            <th>T·ªïng doanh thu</th>
                            <th>D·ª± ki·∫øn thu</th>
                            <th>Th·∫ª th√†nh vi√™n</th>
                            <th>Nh√£n</th>
                            <th>Chi nh√°nh</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr>
                            <td colspan="15" class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="pagination" id="pagination"></div>
            </div>
        </div>

        <!-- Reception page -->
        <div id="page-reception" class="page-content" style="display:none">
            <div class="page-header">
                <h2>C√¥ng vi·ªác</h2>
                <div class="page-header-actions">
                    <button class="btn-primary" onclick="openModal('task')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 8v8M8 12h8" />
                        </svg>
                        Th√™m c√¥ng vi·ªác
                    </button>
                </div>
            </div>
            <div class="tabs" id="taskMainTabs" style="margin-bottom:0">
                <button class="tab active" onclick="switchTaskTab(this,'tasks')">C√¥ng vi·ªác</button>
                <button class="tab" onclick="switchTaskTab(this,'task_types')">Lo·∫°i c√¥ng vi·ªác</button>
            </div>
            <div class="tabs" id="taskStatusTabs">
                <button class="tab active" data-state="" onclick="filterTaskState(this)">T·∫•t c·∫£</button>
                <button class="tab" data-state="priority" onclick="filterTaskState(this)">∆Øu ti√™n</button>
                <button class="tab" data-state="new" onclick="filterTaskState(this)">M·ªõi</button>
                <button class="tab" data-state="in_progress" onclick="filterTaskState(this)">ƒêang l√†m</button>
                <button class="tab" data-state="need_info" onclick="filterTaskState(this)">C·∫ßn th√™m th√¥ng tin</button>
                <button class="tab" data-state="done" onclick="filterTaskState(this)">Ho√†n th√†nh</button>
                <button class="tab" data-state="cancelled" onclick="filterTaskState(this)">H·ªßy</button>
                <button class="tab" data-state="unassigned" onclick="filterTaskState(this)">Ch∆∞a ph√¢n c√¥ng</button>
                <div class="tabs-right">
                    <div class="filter-search">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <path d="M21 21l-4.35-4.35" />
                        </svg>
                        <input type="text" id="taskSearch" placeholder="T√¨m c√¥ng vi·ªác..."
                            oninput="debounceTaskSearch()">
                    </div>
                </div>
            </div>
            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th style="min-width:200px">Ti√™u ƒë·ªÅ</th>
                            <th>Lo·∫°i c√¥ng vi·ªác</th>
                            <th>H√†nh ƒë·ªông</th>
                            <th>Ng∆∞·ªùi ph·ª• tr√°ch</th>
                            <th>Ng∆∞·ªùi theo d√µi</th>
                            <th>Kh√°ch h√†ng</th>
                            <th>N·ªôi dung CV</th>
                            <th>Tr·∫°ng th√°i CV</th>
                            <th>Ng√†y t·∫°o</th>
                            <th>Th·ªùi h·∫°n</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="receptionBody">
                        <tr>
                            <td colspan="11" class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="pagination" id="receptionPagination"></div>
            </div>
        </div>

        <!-- Calendar (Appointments) page -->
        <div id="page-calendar" class="page-content" style="display:none">
            <div class="page-header">
                <h2>L·ªãch h·∫πn</h2>
                <div class="page-header-actions">
                    <button class="btn-primary" onclick="openModal('appointment')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 8v8M8 12h8" />
                        </svg>
                        Th√™m m·ªõi
                    </button>
                    <button class="btn-primary"
                        style="background:var(--bg-card);color:var(--text-primary);border:1px solid var(--border)"
                        onclick="exportCalendarExcel()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                            height="16">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                            <path d="M3 9h18M9 21V9" />
                        </svg>
                        Xu·∫•t Excel
                    </button>
                </div>
            </div>

            <!-- Calendar Toolbar -->
            <div class="calendar-toolbar">
                <div class="calendar-toolbar-left">
                    <div class="calendar-view-toggle" id="calViewToggle">
                        <button class="active" data-view="day" onclick="switchCalendarView('day', this)">Ng√†y</button>
                        <button data-view="week" onclick="switchCalendarView('week', this)">Tu·∫ßn</button>
                        <button data-view="month" onclick="switchCalendarView('month', this)">Th√°ng</button>
                    </div>
                    <div class="calendar-date-nav">
                        <button onclick="navigateCalendar(-1)">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                                height="16">
                                <polyline points="15 18 9 12 15 6" />
                            </svg>
                        </button>
                        <span class="date-label" id="calDateLabel">---</span>
                        <button onclick="navigateCalendar(1)">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                                height="16">
                                <polyline points="9 18 15 12 9 6" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="calendar-toolbar-right">
                    <div class="calendar-search">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <path d="M21 21l-4.35-4.35" />
                        </svg>
                        <input type="text" id="calSearch" placeholder="T√¨m ki·∫øm theo h·ªç t√™n, s·ªë ƒëi·ªán tho·∫°i kh√°ch h√†ng"
                            oninput="filterCalendarSearch()">
                    </div>
                    <div class="calendar-toolbar-icons">
                        <button class="cal-icon-btn active" title="Theo b√°c sƒ©">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                                height="16">
                                <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" />
                                <circle cx="12" cy="7" r="4" />
                            </svg>
                        </button>
                        <button class="cal-icon-btn" title="Theo gi·ªù">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                                height="16">
                                <circle cx="12" cy="12" r="10" />
                                <polyline points="12 6 12 12 16 14" />
                            </svg>
                        </button>
                        <button class="cal-icon-btn cal-counter-btn" title="S·ªë l∆∞·ª£ng">
                            <span class="cal-counter-badge" id="calApptCount">0</span>
                        </button>
                    </div>
                    <div class="calendar-mode-toggle" id="calModeToggle">
                        <button class="active" data-mode="grid" onclick="switchCalendarMode('grid', this)" title="L·ªãch">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7" />
                                <rect x="14" y="3" width="7" height="7" />
                                <rect x="3" y="14" width="7" height="7" />
                                <rect x="14" y="14" width="7" height="7" />
                            </svg>
                        </button>
                        <button data-mode="list" onclick="switchCalendarMode('list', this)" title="Danh s√°ch">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="8" y1="6" x2="21" y2="6" />
                                <line x1="8" y1="12" x2="21" y2="12" />
                                <line x1="8" y1="18" x2="21" y2="18" />
                                <line x1="3" y1="6" x2="3.01" y2="6" />
                                <line x1="3" y1="12" x2="3.01" y2="12" />
                                <line x1="3" y1="18" x2="3.01" y2="18" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Calendar Grid View -->
            <div class="calendar-grid-wrapper" id="calendarGridView">
                <div class="calendar-loading" id="calendarLoading">
                    <div class="spinner"></div>ƒêang t·∫£i l·ªãch h·∫πn...
                </div>
                <div class="calendar-grid-container" id="calendarGrid" style="display:none"></div>
            </div>

            <!-- Calendar List View (hidden by default) -->
            <div class="calendar-list-view" id="calendarListView">
                <div class="tabs" id="apptTabs">
                    <button class="tab active" data-state="" onclick="filterApptState(this)">T·∫•t c·∫£</button>
                    <div class="tabs-right">
                        <select class="filter-select" id="apptCompanyFilter" onchange="apptPage=1;loadAppointments()">
                            <option value="">L·ªçc chi nh√°nh</option>
                        </select>
                        <div class="filter-search">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8" />
                                <path d="M21 21l-4.35-4.35" />
                            </svg>
                            <input type="text" id="apptSearch" placeholder="T√¨m ki·∫øm l·ªãch h·∫πn"
                                oninput="debounceApptSearch()">
                        </div>
                    </div>
                </div>
                <div class="card">
                    <table>
                        <thead>
                            <tr>
                                <th style="width:40px">#</th>
                                <th style="min-width:180px">Kh√°ch h√†ng</th>
                                <th>M√£ KH</th>
                                <th>SƒêT</th>
                                <th>Ng√†y h·∫πn</th>
                                <th>Gi·ªù</th>
                                <th>B√°c sƒ©</th>
                                <th>Chi nh√°nh</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>L√Ω do</th>
                            </tr>
                        </thead>
                        <tbody id="apptBody">
                            <tr>
                                <td colspan="10" class="loading">
                                    <div class="spinner"></div>ƒêang t·∫£i...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="pagination" id="apptPagination"></div>
                </div>
            </div>
        </div>

        <!-- Labo Ticket Management page -->
        <div id="page-treatments" class="page-content" style="display:none">
            <div class="page-header">
                <h2>Qu·∫£n l√Ω Labo</h2>
                <div class="page-header-actions">
                    <button class="btn-primary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 8v8M8 12h8" />
                        </svg>
                        T·∫°o phi·∫øu Labo
                    </button>
                </div>
            </div>
            <div class="tabs" id="treatTabs">
                <button class="tab active" data-state="" onclick="filterTreatState(this)">T·∫•t c·∫£</button>
                <button class="tab" data-state="sending" onclick="filterTreatState(this)">ƒêang g·ª≠i</button>
                <button class="tab" data-state="received" onclick="filterTreatState(this)">ƒê√£ nh·∫≠n</button>
                <button class="tab" data-state="completed" onclick="filterTreatState(this)">Ho√†n th√†nh</button>
                <div class="tabs-right">
                    <div class="filter-search">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <path d="M21 21l-4.35-4.35" />
                        </svg>
                        <input type="text" id="treatSearch" placeholder="T√¨m phi·∫øu Labo"
                            oninput="debounceTreatSearch()">
                    </div>
                </div>
            </div>
            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>M√£ phi·∫øu Labo</th>
                            <th style="min-width:140px">Kh√°ch h√†ng</th>
                            <th>SƒêT</th>
                            <th>Phi·∫øu ƒëi·ªÅu tr·ªã</th>
                            <th>Lo·∫°i ph·ª•c h√¨nh</th>
                            <th>M√£ Labo</th>
                            <th>T√™n ph·ª•c h√¨nh</th>
                            <th>H√£ng Labo</th>
                            <th>RƒÉng</th>
                            <th>M√†u s·∫Øc</th>
                            <th>Tr·∫°ng th√°i Labo</th>
                            <th>Ng√†y g·ª≠i</th>
                            <th>Ng√†y nh·∫≠n (D·ª± ki·∫øn)</th>
                            <th>Ng√†y nh·∫≠n (Th·ª±c t·∫ø)</th>
                            <th>Chi ph√≠ Labo</th>
                            <th>Thanh to√°n Labo</th>
                            <th>B·∫£o h√†nh (th√°ng)</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="treatBody">
                        <tr>
                            <td colspan="18" class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="pagination" id="treatPagination"></div>
            </div>
        </div>

        <!-- Reports page -->
        <div id="page-reports" class="page-content" style="display:none">
            <div class="page-header">
                <h2>B√°o c√°o doanh thu</h2>
                <div class="page-header-actions" style="display:flex;gap:8px;align-items:center">
                    <div class="tabs" style="margin-bottom:0;gap:0">
                        <button class="tab active"
                            style="border-radius:6px 0 0 6px;border:1px solid var(--primary)">Ng√†y</button>
                        <button class="tab"
                            style="border-radius:0 6px 6px 0;border:1px solid var(--border)">Th√°ng</button>
                    </div>
                    <select class="filter-select" style="min-width:180px">
                        <option>Nha khoa T·∫•m Dentist</option>
                    </select>
                    <span style="font-size:12px;color:var(--text-muted)" id="rptDateRange"></span>
                </div>
            </div>
            <div class="tabs" style="margin-bottom:12px">
                <button class="tab active">Th·ªùi gian</button>
                <button class="tab">D·ªãch v·ª•</button>
                <button class="tab">Nh√¢n vi√™n</button>
                <button class="tab">Kh√°ch h√†ng</button>
                <button class="tab">Ngu·ªìn kh√°ch h√†ng</button>
                <button class="tab">Chi nh√°nh</button>
            </div>
            <div class="dash-grid" id="reportStats">
                <div class="dash-stat">
                    <div class="dash-stat-icon blue">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20"
                            height="20">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                            <polyline points="14 2 14 8 20 8" />
                        </svg>
                    </div>
                    <div class="dash-stat-info">
                        <div class="dash-label">T·ªïng phi·∫øu ƒëi·ªÅu tr·ªã</div>
                        <div class="dash-value" id="rptOrders">---</div>
                    </div>
                </div>
                <div class="dash-stat">
                    <div class="dash-stat-icon green">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20"
                            height="20">
                            <line x1="12" y1="1" x2="12" y2="23" />
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                        </svg>
                    </div>
                    <div class="dash-stat-info">
                        <div class="dash-label">T·ªïng doanh thu</div>
                        <div class="dash-value" id="rptRevenue">---</div>
                    </div>
                </div>
                <div class="dash-stat">
                    <div class="dash-stat-icon purple">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20"
                            height="20">
                            <polyline points="20 6 9 17 4 12" />
                        </svg>
                    </div>
                    <div class="dash-stat-info">
                        <div class="dash-label">ƒê√£ thu</div>
                        <div class="dash-value" id="rptPaid">---</div>
                    </div>
                </div>
                <div class="dash-stat">
                    <div class="dash-stat-icon orange">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20"
                            height="20">
                            <rect x="2" y="5" width="20" height="14" rx="2" />
                            <path d="M2 10h20" />
                        </svg>
                    </div>
                    <div class="dash-stat-info">
                        <div class="dash-label">C√¥ng n·ª£</div>
                        <div class="dash-value" id="rptDebt">---</div>
                    </div>
                </div>
            </div>
            <div class="dash-2col">
                <div class="dash-panel">
                    <div class="dash-panel-header">
                        <span>BI·ªÇU ƒê·ªí</span>
                        <div style="font-size:12px;color:var(--text-secondary);text-transform:none;letter-spacing:0">
                            T·ªïng doanh thu: <span style="color:var(--primary);font-weight:700"
                                id="rptChartTotal">0</span>
                            &nbsp; Trung b√¨nh ng√†y: <span style="color:var(--success);font-weight:700"
                                id="rptChartAvg">0</span>
                        </div>
                    </div>
                    <div class="dash-panel-body" id="rptMonthly" style="max-height:420px">
                        <div class="loading">
                            <div class="spinner"></div>ƒêang t·∫£i...
                        </div>
                    </div>
                </div>
                <div class="dash-panel">
                    <div class="dash-panel-header"><span>DOANH THU THEO CHI NH√ÅNH</span></div>
                    <div class="dash-panel-body" id="rptCompany">
                        <div class="loading">
                            <div class="spinner"></div>ƒêang t·∫£i...
                        </div>
                    </div>
                </div>
            </div>
            <div style="margin-top:16px">
                <div class="dash-panel">
                    <div class="dash-panel-header">
                        <span>B√ÅO C√ÅO S·ªê LI·ªÜU</span>
                        <div class="panel-actions">
                            <button class="btn-primary"
                                style="font-size:12px;padding:6px 14px;gap:6px;background:#dc2626">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14"
                                    height="14">
                                    <path d="M6 9V2h12v7" />
                                    <path
                                        d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" />
                                    <rect x="6" y="14" width="12" height="8" />
                                </svg>
                                In b√°o c√°o
                            </button>
                            <button class="btn-primary"
                                style="font-size:12px;padding:6px 14px;gap:6px;background:#fff;color:var(--text-primary);border:1px solid var(--border)">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14"
                                    height="14">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                    <polyline points="7 10 12 15 17 10" />
                                    <line x1="12" y1="15" x2="12" y2="3" />
                                </svg>
                                Xu·∫•t file
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="dash-2col" style="margin-top:16px">
                <div class="dash-panel">
                    <div class="dash-panel-header"><span>TOP B√ÅC Sƒ®</span></div>
                    <div class="dash-panel-body" id="rptDoctors">
                        <div class="loading">
                            <div class="spinner"></div>ƒêang t·∫£i...
                        </div>
                    </div>
                </div>
                <div class="dash-panel">
                    <div class="dash-panel-header"><span>TOP D·ªäCH V·ª§</span></div>
                    <div class="dash-panel-body" id="rptServices">
                        <div class="loading">
                            <div class="spinner"></div>ƒêang t·∫£i...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê PURCHASE PAGE ‚ïê‚ïê -->
        <div id="page-purchase" class="page-content" style="display:none">
            <div class="page-header">
                <h2>Mua h√†ng</h2>
                <div class="page-header-actions">
                    <button class="btn-primary" onclick="openModal('purchase')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 8v8M8 12h8" />
                        </svg>
                        T·∫°o phi·∫øu mua
                    </button>
                    <input type="text" id="purchaseSearch" placeholder="üîç T√¨m ki·∫øm..."
                        style="width:250px;padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px"
                        oninput="purchaseSearchKey=this.value;purchasePage=1;loadPurchase()">
                </div>
            </div>
            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>S·ªë phi·∫øu</th>
                            <th>Nh√† cung c·∫•p</th>
                            <th>Ng√†y mua h√†ng</th>
                            <th>T·ªïng ti·ªÅn</th>
                            <th>ƒê√£ thanh to√°n</th>
                            <th>C√≤n n·ª£</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="purchaseTableBody">
                        <tr>
                            <td colspan="8" class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div id="purchasePagination" class="pagination"></div>
            </div>
        </div>

        <!-- ‚ïê‚ïê INVENTORY PAGE ‚ïê‚ïê -->
        <div id="page-inventory" class="page-content" style="display:none">
            <div class="page-header">
                <h2>Kho</h2>
                <div class="page-header-actions" id="inventoryActions">
                    <input type="text" id="inventorySearch" placeholder="üîç T√¨m m√£, t√™n s·∫£n ph·∫©m"
                        style="width:250px;padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px"
                        oninput="inventorySearchKey=this.value;inventoryPage=1;loadInventory()">
                </div>
            </div>
            <div class="tabs" id="inventoryTabs">
                <button class="tab active" data-tab="stock_summary" onclick="switchInventoryTab(this)">Nh·∫≠p xu·∫•t
                    t·ªìn</button>
                <button class="tab" data-tab="stock_in" onclick="switchInventoryTab(this)">Nh·∫≠p kho</button>
                <button class="tab" data-tab="stock_out" onclick="switchInventoryTab(this)">Xu·∫•t kho</button>
                <button class="tab" data-tab="material_request" onclick="switchInventoryTab(this)">Y√™u c·∫ßu v·∫≠t
                    t∆∞</button>
                <button class="tab" data-tab="stock_check" onclick="switchInventoryTab(this)">Ki·ªÉm kho</button>
                <button class="tab" data-tab="history" onclick="switchInventoryTab(this)">L·ªãch s·ª≠ xu·∫•t - nh·∫≠p</button>
            </div>
            <div id="inventoryContent">
                <!-- Dynamic content rendered by JS per tab -->
                <div class="card">
                    <table>
                        <thead id="inventoryTableHead"></thead>
                        <tbody id="inventoryTableBody">
                            <tr>
                                <td colspan="10" class="loading">
                                    <div class="spinner"></div>ƒêang t·∫£i...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="inventoryPagination" class="pagination"></div>
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê SALARY PAGE ‚ïê‚ïê -->
        <div id="page-salary" class="page-content" style="display:none">
            <div class="page-header">
                <h2>B·∫£ng l∆∞∆°ng nh√¢n vi√™n</h2>
                <div class="page-header-actions">
                    <select id="salaryMonth" style="padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px"
                        onchange="loadSalary()">
                        <option>02/2026</option>
                        <option>01/2026</option>
                        <option>12/2025</option>
                    </select>
                    <input type="text" id="salarySearch" placeholder="üîç T√¨m nh√¢n vi√™n..."
                        style="width:250px;padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px"
                        oninput="salarySearchKey=this.value;salaryPage=1;loadSalary()">
                </div>
            </div>
            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>M√£ nh√¢n vi√™n</th>
                            <th style="min-width:160px">H·ªç v√† t√™n</th>
                            <th>T·ªïng l∆∞∆°ng th·ª±c t·∫ø</th>
                            <th>L∆∞∆°ng c∆° b·∫£n</th>
                            <th>Th∆∞·ªüng</th>
                            <th>Hoa h·ªìng</th>
                            <th>Ph·ª• c·∫•p</th>
                            <th>TƒÉng ca</th>
                            <th>T·∫°m ·ª©ng</th>
                            <th>B·∫£o hi·ªÉm</th>
                            <th>Kh√°c</th>
                        </tr>
                    </thead>
                    <tbody id="salaryTableBody">
                        <tr>
                            <td colspan="11" class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div id="salaryPagination" class="pagination"></div>
            </div>
        </div>

        <!-- ‚ïê‚ïê CASHBOOK PAGE ‚ïê‚ïê -->
        <div id="page-cashbook" class="page-content" style="display:none">
            <div class="page-header">
                <h2>S·ªï qu·ªπ ti·ªÅn</h2>
                <div class="page-header-actions">
                    <button class="btn-primary" onclick="openModal('cashbook')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 8v8M8 12h8" />
                        </svg>
                        T·∫°o phi·∫øu thu/chi
                    </button>
                    <input type="text" id="cashbookSearch" placeholder="üîç T√¨m ki·∫øm..."
                        style="width:250px;padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px"
                        oninput="cashbookSearchKey=this.value;cashbookPage=1;loadCashbook()">
                </div>
            </div>
            <div class="tabs" id="cashbookTabs">
                <button class="tab active" onclick="switchCashbookTab(this,'cash')">S·ªï qu·ªπ ti·ªÅn</button>
                <button class="tab" onclick="switchCashbookTab(this,'bank')">S·ªï qu·ªπ ng√¢n h√†ng</button>
            </div>
            <div class="dash-grid" style="grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:16px">
                <div class="dash-stat">
                    <div class="dash-stat-icon blue">üìä</div>
                    <div class="dash-stat-info">
                        <div class="dash-label">ƒê·∫ßu k·ª≥</div>
                        <div class="dash-value" id="cbStart">0</div>
                    </div>
                </div>
                <div class="dash-stat">
                    <div class="dash-stat-icon green">üìà</div>
                    <div class="dash-stat-info">
                        <div class="dash-label">T·ªïng thu</div>
                        <div class="dash-value" id="cbIncome" style="color:#10b981">0</div>
                    </div>
                </div>
                <div class="dash-stat">
                    <div class="dash-stat-icon red">üìâ</div>
                    <div class="dash-stat-info">
                        <div class="dash-label">T·ªïng chi</div>
                        <div class="dash-value" id="cbExpense" style="color:#ef4444">0</div>
                    </div>
                </div>
                <div class="dash-stat">
                    <div class="dash-stat-icon purple">üí∞</div>
                    <div class="dash-stat-info">
                        <div class="dash-label">Cu·ªëi k·ª≥</div>
                        <div class="dash-value" id="cbEnd">0</div>
                    </div>
                </div>
            </div>
            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>Ng√†y</th>
                            <th>M√£ phi·∫øu</th>
                            <th>Lo·∫°i</th>
                            <th>H·∫°ng m·ª•c</th>
                            <th>Ng∆∞·ªùi n·ªôp/nh·∫≠n</th>
                            <th style="color:#10b981">Thu</th>
                            <th style="color:#ef4444">Chi</th>
                            <th>T·ªìn</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Chi nh√°nh</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="cashbookTableBody">
                        <tr>
                            <td colspan="11" class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div id="cashbookPagination" class="pagination"></div>
            </div>
        </div>

        <!-- ‚ïê‚ïê CALL CENTER PAGE ‚ïê‚ïê -->
        <div id="page-callcenter" class="page-content" style="display:none">
            <div class="page-header">
                <h2>L·ªãch s·ª≠ cu·ªôc g·ªçi</h2>
                <div class="page-header-actions">
                    <input type="text" id="callcenterSearch" placeholder="üîç T√¨m ki·∫øm..."
                        style="width:250px;padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px"
                        oninput="callcenterSearchKey=this.value;callcenterPage=1;loadCallCenter()">
                </div>
            </div>
            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>Th·ªùi gian</th>
                            <th>S·ªë g·ªçi</th>
                            <th>S·ªë nh·∫≠n</th>
                            <th>H∆∞·ªõng</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Th·ªùi l∆∞·ª£ng</th>
                            <th>Nh√¢n vi√™n</th>
                            <th>Kh√°ch h√†ng</th>
                            <th>Ghi √¢m</th>
                        </tr>
                    </thead>
                    <tbody id="callcenterTableBody">
                        <tr>
                            <td colspan="9" class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div id="callcenterPagination" class="pagination"></div>
            </div>
        </div>

        <!-- ‚ïê‚ïê COMMISSION PAGE ‚ïê‚ïê -->
        <div id="page-commission" class="page-content" style="display:none">
            <div class="page-header">
                <h2>Ng∆∞·ªùi gi·ªõi thi·ªáu</h2>
                <div class="page-header-actions">
                    <button class="btn-primary" onclick="openModal('referral')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 8v8M8 12h8" />
                        </svg>
                        Th√™m ng∆∞·ªùi gi·ªõi thi·ªáu
                    </button>
                    <input type="text" id="commissionSearch" placeholder="üîç T√¨m ki·∫øm..."
                        style="width:250px;padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px"
                        oninput="commissionSearchKey=this.value;commissionPage=1;loadCommission()">
                </div>
            </div>
            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>M√£ ng∆∞·ªùi gi·ªõi thi·ªáu</th>
                            <th style="min-width:160px">H·ªç v√† t√™n</th>
                            <th>Ng√†y sinh</th>
                            <th>Gi·ªõi t√≠nh</th>
                            <th>S·ªë ƒëi·ªán tho·∫°i</th>
                            <th>SL KH ƒë√£ gi·ªõi thi·ªáu</th>
                            <th>T·ªïng doanh thu GT</th>
                            <th>Hoa h·ªìng ƒë√£ h∆∞·ªüng</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="commissionTableBody">
                        <tr>
                            <td colspan="9" class="loading">
                                <div class="spinner"></div>ƒêang t·∫£i...
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div id="commissionPagination" class="pagination"></div>
            </div>
        </div>

        <!-- ‚ïê‚ïê CATEGORIES PAGE ‚ïê‚ïê -->
        <div id="page-categories" class="page-content" style="display:none">
            <div class="page-header">
                <h2>Danh m·ª•c</h2>
            </div>
            <div style="display:flex;gap:20px">
                <!-- Sidebar menu -->
                <div style="min-width:260px;max-width:260px">
                    <div class="card" style="padding:0;overflow:hidden">
                        <!-- Th√¥ng tin kh√°ch h√†ng group -->
                        <div class="cat-group">
                            <div class="cat-group-title"
                                style="padding:12px 16px;font-weight:600;font-size:13px;color:#6b7280;text-transform:uppercase;background:#f9fafb;border-bottom:1px solid #e5e7eb">
                                Th√¥ng tin kh√°ch h√†ng</div>
                            <a class="cat-menu-item active" onclick="loadCatDetail('customer_labels')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151;transition:background 0.15s">Nh√£n
                                kh√°ch h√†ng</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('partner_sources')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Ngu·ªìn
                                kh√°ch h√†ng</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('partner_titles')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Danh
                                x∆∞ng</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('medical_history')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Ti·ªÉu
                                s·ª≠ b·ªánh</a>
                        </div>
                        <!-- Tr·∫°ng th√°i kh√°ch h√†ng -->
                        <a class="cat-menu-item" onclick="loadCatDetail('customer_statuses')"
                            style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Tr·∫°ng
                            th√°i kh√°ch h√†ng</a>
                        <!-- ƒê·ªëi t√°c group -->
                        <div class="cat-group">
                            <div class="cat-group-title"
                                style="padding:12px 16px;font-weight:600;font-size:13px;color:#6b7280;text-transform:uppercase;background:#f9fafb;border-bottom:1px solid #e5e7eb">
                                ƒê·ªëi t√°c</div>
                            <a class="cat-menu-item" onclick="loadCatDetail('labo_partners')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">ƒê·ªëi
                                t√°c Labo</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('insurance')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">B·∫£o
                                hi·ªÉm</a>
                        </div>
                        <!-- D·ªãch v·ª• - V·∫≠t t∆∞ - Thu·ªëc group -->
                        <div class="cat-group">
                            <div class="cat-group-title"
                                style="padding:12px 16px;font-weight:600;font-size:13px;color:#6b7280;text-transform:uppercase;background:#f9fafb;border-bottom:1px solid #e5e7eb">
                                D·ªãch v·ª• - V·∫≠t t∆∞ - Thu·ªëc</div>
                            <a class="cat-menu-item" onclick="loadCatDetail('product_categories')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Nh√≥m
                                d·ªãch v·ª•</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('services')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">D·ªãch
                                v·ª•</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('material_groups')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Nh√≥m
                                v·∫≠t t∆∞ - thu·ªëc</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('materials')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">V·∫≠t
                                t∆∞ - thu·ªëc</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('units')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">ƒê∆°n
                                v·ªã t√≠nh</a>
                        </div>
                        <!-- Standalone items -->
                        <a class="cat-menu-item" onclick="loadCatDetail('prescriptions')"
                            style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">ƒê∆°n
                            thu·ªëc m·∫´u</a>
                        <a class="cat-menu-item" onclick="loadCatDetail('price_list')"
                            style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">B·∫£ng
                            gi√°</a>
                        <a class="cat-menu-item" onclick="loadCatDetail('commission_table')"
                            style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">B·∫£ng
                            hoa h·ªìng</a>
                        <!-- Nh√¢n vi√™n group -->
                        <div class="cat-group">
                            <div class="cat-group-title"
                                style="padding:12px 16px;font-weight:600;font-size:13px;color:#6b7280;text-transform:uppercase;background:#f9fafb;border-bottom:1px solid #e5e7eb">
                                Nh√¢n vi√™n</div>
                            <a class="cat-menu-item" onclick="loadCatDetail('employees')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Nh√¢n
                                vi√™n</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('departments')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Ph√≤ng
                                ban</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('job_titles')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Ch·ª©c
                                danh</a>
                        </div>
                        <!-- Th√¥ng s·ªë Labo group -->
                        <div class="cat-group">
                            <div class="cat-group-title"
                                style="padding:12px 16px;font-weight:600;font-size:13px;color:#6b7280;text-transform:uppercase;background:#f9fafb;border-bottom:1px solid #e5e7eb">
                                Th√¥ng s·ªë Labo</div>
                            <a class="cat-menu-item" onclick="loadCatDetail('labo_brands')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">H√£ng
                                Labo</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('restoration_types')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Lo·∫°i
                                ph·ª•c h√¨nh</a>
                            <a class="cat-menu-item" onclick="loadCatDetail('labo_colors')"
                                style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">M√†u
                                s·∫Øc</a>
                        </div>
                        <!-- More standalone items -->
                        <a class="cat-menu-item" onclick="loadCatDetail('income_expense_types')"
                            style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Lo·∫°i
                            thu chi</a>
                        <a class="cat-menu-item" onclick="loadCatDetail('inventory_criteria')"
                            style="display:block;padding:10px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;font-size:14px;color:#374151">Ti√™u
                            ch√≠ ki·ªÉm kho</a>
                        <a class="cat-menu-item" onclick="loadCatDetail('diagnoses')"
                            style="display:block;padding:10px 16px;cursor:pointer;font-size:14px;color:#374151">Ch·∫©n
                            ƒëo√°n rƒÉng</a>
                    </div>
                </div>
                <!-- Content area -->
                <div style="flex:1">
                    <div id="catDetailArea" class="card" style="padding:20px;min-height:400px">
                        <div style="text-align:center;color:#9ca3af;padding:60px 0">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="48"
                                height="48" style="margin:0 auto 16px;display:block;opacity:0.5">
                                <path d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                            <p>Ch·ªçn m·ªôt danh m·ª•c t·ª´ menu b√™n tr√°i ƒë·ªÉ xem chi ti·∫øt</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="page-locations" class="page-content" style="display:none">
            <div class="page-header">
                <h2>Chi nh√°nh h·ªá th·ªëng</h2>
                <div class="page-header-actions">
                    <button class="btn-primary" onclick="alert('T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 8v8M8 12h8" />
                        </svg>
                        Th√™m chi nh√°nh
                    </button>
                </div>
            </div>
            <div id="branchListBody" class="dash-grid"
                style="grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));">
                <!-- Branch cards loaded here -->
            </div>
        </div>

        <!-- Settings page -->
        <!-- ‚ïê‚ïê‚ïê USER MANAGEMENT PAGE ‚ïê‚ïê‚ïê -->
        <div id="page-users" class="page-content" style="display:none">
            <div class="page-header">
                <h2>Qu·∫£n l√Ω ng∆∞·ªùi d√πng</h2>
                <div class="page-header-actions">
                    <button class="btn-primary" onclick="openUserModal()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                            height="16">
                            <line x1="12" y1="5" x2="12" y2="19" />
                            <line x1="5" y1="12" x2="19" y2="12" />
                        </svg>
                        Th√™m ng∆∞·ªùi d√πng
                    </button>
                </div>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th style="width:40px">#</th>
                            <th style="min-width:160px">T√™n ng∆∞·ªùi d√πng</th>
                            <th style="min-width:200px">Email</th>
                            <th style="min-width:120px">Vai tr√≤</th>
                            <th style="min-width:100px">Tr·∫°ng th√°i</th>
                            <th style="min-width:180px">Ng√†y t·∫°o</th>
                            <th style="min-width:100px">Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- Rendered by JS -->
                    </tbody>
                </table>
            </div>
            <!-- Role Permission Matrix -->
            <div id="permissionMatrix"
                style="margin-top:24px;background:#fff;border-radius:10px;border:1px solid var(--border);padding:24px">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
                    <div>
                        <h3 style="margin:0;font-size:16px;font-weight:700;color:var(--text)">üîê Ph√¢n quy·ªÅn theo vai tr√≤
                        </h3>
                        <p style="margin:4px 0 0;font-size:12px;color:var(--text-muted)">Thi·∫øt l·∫≠p quy·ªÅn truy c·∫≠p cho
                            t·ª´ng vai tr√≤. Thay ƒë·ªïi s·∫Ω √°p d·ª•ng cho t·∫•t c·∫£ ng∆∞·ªùi d√πng thu·ªôc vai tr√≤ ƒë√≥.</p>
                    </div>
                    <button class="btn-primary" onclick="saveRolePermissions()" style="font-size:13px;padding:8px 20px">
                        üíæ L∆∞u ph√¢n quy·ªÅn
                    </button>
                </div>
                <div style="overflow-x:auto">
                    <table style="width:100%;border-collapse:collapse;font-size:13px" id="permMatrixTable">
                        <thead>
                            <tr style="background:#f8fafc">
                                <th
                                    style="text-align:left;padding:12px 16px;font-weight:600;color:var(--text-secondary);border-bottom:2px solid var(--border);min-width:200px">
                                    Trang / Ch·ª©c nƒÉng</th>
                                <th
                                    style="text-align:center;padding:12px 16px;font-weight:600;border-bottom:2px solid var(--border);min-width:120px">
                                    <span
                                        style="display:inline-flex;align-items:center;gap:4px;padding:3px 10px;border-radius:4px;font-size:11px;font-weight:600;background:#fee2e2;color:#dc2626">üîë
                                        Admin</span>
                                </th>
                                <th
                                    style="text-align:center;padding:12px 16px;font-weight:600;border-bottom:2px solid var(--border);min-width:120px">
                                    <span
                                        style="display:inline-flex;align-items:center;gap:4px;padding:3px 10px;border-radius:4px;font-size:11px;font-weight:600;background:#dbeafe;color:#2563eb">üëÅÔ∏è
                                        Viewer</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="permMatrixBody">
                            <!-- Rendered by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="page-settings" class="page-content" style="display:none">
            <div class="page-header">
                <h2>C·∫•u h√¨nh chung</h2>
                <div class="page-header-actions">
                    <button class="btn-primary" onclick="alert('ƒê√£ l∆∞u c·∫•u h√¨nh!')">
                        √Åp d·ª•ng
                    </button>
                </div>
            </div>
            <div style="display:flex;gap:0;min-height:calc(100vh - 120px)">
                <!-- Settings sidebar sub-nav -->
                <div
                    style="width:200px;background:#fff;border-right:1px solid var(--border);padding:12px 0;flex-shrink:0">
                    <div class="settings-subnav">
                        <a class="settings-nav-item" onclick="switchSettingsTab(this,'branches')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                                height="16">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z" />
                                <circle cx="12" cy="10" r="3" />
                            </svg>
                            Chi nh√°nh
                        </a>
                        <a class="settings-nav-item" onclick="switchSettingsTab(this,'permissions')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                                height="16">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                            </svg>
                            Nh√≥m quy·ªÅn
                        </a>
                        <a class="settings-nav-item active" onclick="switchSettingsTab(this,'general')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                                height="16">
                                <circle cx="12" cy="12" r="3" />
                                <path
                                    d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" />
                            </svg>
                            C·∫•u h√¨nh chung
                        </a>
                        <a class="settings-nav-item" onclick="switchSettingsTab(this,'team')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                                height="16">
                                <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" />
                                <circle cx="9" cy="7" r="4" />
                                <path d="M23 21v-2a4 4 0 00-3-3.87" />
                                <path d="M16 3.13a4 4 0 010 7.75" />
                            </svg>
                            C·∫•u h√¨nh Team
                        </a>
                        <a class="settings-nav-item" onclick="switchSettingsTab(this,'other')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                                height="16">
                                <circle cx="12" cy="12" r="10" />
                                <path d="M12 16v-4M12 8h.01" />
                            </svg>
                            C·∫•u h√¨nh kh√°c
                        </a>
                        <a class="settings-nav-item" onclick="switchSettingsTab(this,'activity')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"
                                height="16">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
                            </svg>
                            L·ªãch s·ª≠ ho·∫°t ƒë·ªông
                        </a>
                    </div>
                </div>
                <!-- Settings content area -->
                <div style="flex:1;padding:20px;overflow-y:auto">
                    <div id="settingsContent">
                        <!-- C·∫§U H√åNH CHUNG -->
                        <div class="settings-section">
                            <h3
                                style="color:var(--primary);font-size:14px;font-weight:700;margin-bottom:16px;text-transform:uppercase;letter-spacing:0.3px">
                                C·∫§U H√åNH CHUNG</h3>
                            <div class="settings-grid">
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">Marketing</div>
                                        <div class="settings-cb-desc">Qu·∫£n l√Ω ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i, th·∫ª ∆∞u ƒë√£i
                                        </div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">Nh·∫Øc l·ªãch h·∫πn</div>
                                        <div class="settings-cb-desc">Hi·ªán th√¥ng b√°o khi s·∫Øp t·ªõi l·ªãch h·∫πn</div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">ƒê∆°n v·ªã t√≠nh</div>
                                        <div class="settings-cb-desc">H√†ng h√≥a c√≥ th·ªÉ nh·∫≠p xu·∫•t nhi·ªÅu ƒë∆°n v·ªã t√≠nh
                                        </div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">B√°n thu·ªëc</div>
                                        <div class="settings-cb-desc">Qu·∫£n l√Ω ƒë∆°n thu·ªëc v√† h√≥a ƒë∆°n thu·ªëc</div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">SMS Brandname CSKH</div>
                                        <div class="settings-cb-desc">Qu·∫£n l√Ω SMS Brandname CSKH</div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">Kh·∫£o s√°t ƒë√°nh gi√°</div>
                                        <div class="settings-cb-desc">Qu·∫£n l√Ω v√† c·∫•u h√¨nh kh·∫£o s√°t ƒë√°nh gi√°</div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">B·∫£o hi·ªÉm</div>
                                        <div class="settings-cb-desc">Qu·∫£n l√Ω v√† ƒë·ªëi so√°t c√¥ng n·ª£ b·∫£o hi·ªÉm</div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">Xu·∫•t kho qu√° s·ªë l∆∞·ª£ng t·ªìn</div>
                                        <div class="settings-cb-desc">Kh√¥ng cho ph√©p xu·∫•t kho qu√° s·ªë l∆∞·ª£ng t·ªìn</div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">Kh·∫£o s√°t kh√°ch h√†ng</div>
                                        <div class="settings-cb-desc">Qu·∫£n l√Ω v√† ƒë√°nh gi√° ch·∫•t l∆∞·ª£ng d·ªãch v·ª• NK
                                        </div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">Thanh to√°n ngo·∫°i t·ªá</div>
                                        <div class="settings-cb-desc">Thanh to√°n phi·∫øu ƒëi·ªÅu tr·ªã b·∫±ng ngo·∫°i t·ªá</div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">Ho√†n ti·ªÅn ƒëi·ªÅu tr·ªã</div>
                                        <div class="settings-cb-desc">Cho ph√©p t·∫°o thanh to√°n ho√†n ti·ªÅn d·ªãch v·ª• ƒëi·ªÅu
                                            tr·ªã</div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox">
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">Head Office <span
                                                style="background:#22c55e;color:#fff;font-size:9px;padding:1px 6px;border-radius:10px;margin-left:4px">D√πng
                                                th·ª≠</span></div>
                                        <div class="settings-cb-desc">Qu·∫£n l√Ω t√≠nh nƒÉng Head Office</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <!-- ƒêA CHI NH√ÅNH -->
                        <div class="settings-section" style="margin-top:24px">
                            <h3
                                style="color:var(--primary);font-size:14px;font-weight:700;margin-bottom:16px;text-transform:uppercase;letter-spacing:0.3px">
                                ƒêA CHI NH√ÅNH</h3>
                            <div class="settings-grid">
                                <label class="settings-checkbox-card">
                                    <input type="checkbox" checked>
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">D√πng chung danh s√°ch ƒë·ªëi t√°c</div>
                                        <div class="settings-cb-desc">Chia s·∫ª danh s√°ch ƒë·ªëi t√°c gi·ªØa c√°c chi nh√°nh
                                        </div>
                                    </div>
                                </label>
                                <label class="settings-checkbox-card">
                                    <input type="checkbox" checked>
                                    <div class="settings-cb-info">
                                        <div class="settings-cb-title">D√πng chung danh s√°ch s·∫£n ph·∫©m</div>
                                        <div class="settings-cb-desc">Chia s·∫ª danh s√°ch s·∫£n ph·∫©m gi·ªØa c√°c chi nh√°nh
                                        </div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê DETAIL PANEL ‚ïê‚ïê‚ïê -->
    <div class="detail-overlay" id="detailOverlay" onclick="closeDetail()"></div>
    <div class="detail-panel" id="detailPanel">
        <div class="detail-top">
            <div class="detail-breadcrumb">
                <a href="#" onclick="closeDetail();return false">Kh√°ch h√†ng</a> &gt; <span
                    id="detailBreadcrumbName">---</span>
            </div>
            <button class="detail-close" onclick="closeDetail()">‚úï</button>
        </div>
        <div class="detail-body" id="detailBody"></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê CHAT WIDGET ‚ïê‚ïê‚ïê -->
    <div class="chat-widget" onclick="alert('T√≠nh nƒÉng chat ƒëang ph√°t tri·ªÉn')" style="cursor:pointer">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
        </svg>
    </div>

    <!-- ‚ïê‚ïê‚ïê MODAL SYSTEM ‚ïê‚ïê‚ïê -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-container" id="modalContainer">
            <!-- Modal content injected here -->
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê SCRIPTS ‚ïê‚ïê‚ïê -->
    <script src="/static/js/app.js"></script>
</body>

</html>